<!DOCTYPE html>
<html lang="en">
<body>
    <h1>Top 20 Players</h1>
    <button id="clearBtn">Clear All Scores</button>

    <table id="leaderboard-table">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Player</th>
                <th>Score</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script>
    async function fetchLeaderboard() {
        const response = await fetch('/leaderboard');
        const data = await response.json();
        const tbody = document.querySelector('#leaderboard-table tbody');
        tbody.innerHTML = data.scores.map((score, index) => `
            <tr>
                <td>${index + 1}</td>
                <td>${score.player_id}</td>
                <td>${score.score}</td>
            </tr>
        `).join('');
    }

    document.getElementById('clearBtn').addEventListener('click', async () => {
        const response = await fetch('/delete-all', { method: 'POST' });
        const data = await response.json();
        alert(data.message || data.error);
        fetchLeaderboard();
    });

    fetchLeaderboard();
    setInterval(fetchLeaderboard, 5000);
    </script>
</body>
</html>